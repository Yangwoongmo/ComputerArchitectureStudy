# 2023/05/30

## 명령어 집합 구조

명령어 파이프라이닝을 하기 유리하게 생긴 명령어와 불리한 명령어가 있다

CPU는 명령어를 실행한다, 하지만 이 세상의 모든 CPU가 같은 명령어를 실행하지는 않는다.
CPU마다 이해할 수 있는 명령어의 생김새가 다를 수 있다

명령어 집합이란, CPU가 이해할 수 있는 명령어들의 모음이다
윈도우 파일을 그대로, 특별한 설정 없이 스마트폰에서 실행하려고 하면 실행이 안 된다. 스마트폰 CPU가 프로그램 명령어를 이해하지 못 하기 때문이다

따라서, CPU는 명령어 집합에 속해 있는 명령어들만 이해할 수 있다
명령어 집합이란 CPU의 언어인 셈이다
명령어가 달라지면,  명령어 해석 방식, 레지스터의 종류와 개수, 파이프라이닝의 용이성 등 많은 것들이 달라지게 된다

명령어 집합 구조 ( ISA )는 하드웨어가 소프트웨어를 어떻게 이해해야 하는가에 대한 약속기도 하다

현대 명령어 집합의 두 축을 담당하고 있는 CISC와 RISC 에 대해 알아보자


### CISC

( Complex Instruction Set Computer )
복잡한 명령어 집합을 활용하는 컴퓨터

Intel이나 AMD의 CPU로 대표되는 x86이나 x86-64는 CISC를 기반으로 두고 있다

특징
복잡하고 다양한 명령어 활용
명령어의 수, 형태와 크기가 다양한 가변 길이 명령어를 활용한다

다양하고 강력한 명령어를 활용하며, 상대적으로 적은 수의 명령어로도 프로그램을 실행하는 것이 가능하다

메모리를 최대한 아끼며 개발해야 했던 시절에 인기가 높았으나
명령어 파이프라이닝이 불리하다 라는 치명적인 단점이 있다

명령어가 워낙 복잡하고 다양한 기능을 제공하는 탓에
명령어의 크기와, 실행되기까지의 시간이 일정하지 않다

파이프라이닝에 유리하려면 명령어 실행 시간이 비교적 일정해야 한다.
하지만 CISC는 복잡한 명령어 때문에 명령어 하나를 실행하는데 여러 클럭 주기가 필요한 경우가 많다

게다가, CISC가 복잡하고 다양한 명령어를 제공하긴 하지만, 대다수의 복잡한 명령어는 사용 빈도가 낮다고 한다


### RISC

(Reduced Instruction Set Computer)
명령어의 종류가 적고, 짧고 규격화된 명령어 사용

가급적 1클럭 이내로 실행되는 규격화된 명령어를 사용한다

RISC의 특징은 단순하고 적은 수의 고정 길이 명령어 집합을 이용한다고 할 수 있다

특징
CISC에 비해서 명령어 파이프라이닝에 유리하다

메모리 접근 방식을 최소화(load, store), 레지스터를 십분 활용하기 때문에
CISC에 비해서 범용 레지스터의 종류가 더 많은 경우가 많다

다만 명령어 종류가 CISC보다 적기에, 더 많은 명령어를 사용하여 프로그램을 동작하게 된다


### 정리

CISC와 RISC의 특징에 대해 알아봤다
하지만 명령어 파이프라이닝은 현대 CPU에서 가장 중요한 기술이기 때문에
CISC기반의 CPU제조사들은 이걸 극복하기 위해서
실제 실행될 때는, CPU내부적으로 명령어보다 좀 더 작은 단위로 쪼개서 실행하는 경우가 있다
마이크로 명령어라고 해서, 명령어를 실행하는 동작까지도 1클럭단위로 쪼개서 실행하는 경우가 있다
따라서 CISC기반의 CPU라고 해도, 내부적으로는 RISC처럼 돌아가는 경우가 있다

