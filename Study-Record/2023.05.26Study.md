# 2023/05/26

## 클럭

### CPU의 속도를 빠르게 하려면?

1. 컴퓨터 부품들은 '클럭 신호' 에 맞춰 일정하게 움직인다
2. CPU는 '명령어 사이클' 이라는 정해진 흐름에 맞춰 명령어들을 실행한다

Q. 그렇다면 클럭 신호가 빨라진다면 CPU를 비롯한 컴퓨터 부품들은 그만큼 빨라지는가?

A. 항상 그런 것은 아니지만 일반적으로는 맞다

### 클럭 속도에 대해서

클럭 속도는 Hz라는 단위로 측정되며, Hz는 1초에 클럭이 반복되는 횟수.
1초에 1번 반복되면 1Hz, 100번 반복되면 100Hz라고 표기한다

CPU에 적혀있는 4.9GHz 등의 숫자는 1초에 최대 몇번이나 클럭이 반복될 수 있는지 성능을 적어놓은 것이라 할 수 있다
4.9GHz라면 1초에 약 49억번 정도라고 할 수 있다

또한 클럭 신호는 항상 일정하게 흐르지 않고, CPU를 빨리 돌려야 할 때는 빠르게, 아닌 경우에는 느리게 유동적으로 조절한다고 한다


Q. 그렇다면 클럭 속도를 계속 높히면 CPU가 엄청 빨라지지 않을까?

A. 속도를 마냥 높힐 수가 없는 게, 필요 이상으로 클럭 주기를 빠르게 하는 경우 CPU의 발열이 심해지기 때문에, 한계가 존재한다


## 코어

### 코어란

CPU 제품 사진에는 코어와 스레드 라는 항목이 있다
코어는 8개, 스레드는 16개 이런 식으로 적혀 있는데 정확하게 무엇일까

여태까지 배운 CPU에서 더 나아가자면.
지금까지는 CPU란, '명령어를 실행하는 부품' 이며, 원칙적으로 컴퓨터 안에 하나만 존재한다고 알고 있었다.
하지만 오늘날의 CPU에는 '명령어를 실행하는 부품' 이 여러 개 존재하며, 이것을 '코어' 라고 부른다

따라서 오늘날의 CPU는 과거 CPU라고 정의한 것 (== 코어) 을 여러 개 집합시켜 놓은 것이라고 할 수 있다

코어를 여러 개 가지고 있는 CPU를 '멀티 코어 CPU' 라고 한다


Q. 그렇다면 CPU안의 코어를 엄청나게 늘리면 연산량이 비례해서 빨라지지 않는가?

A. 꼭 코어 수에 비례해서 빨라지지만은 않는다고 합니다


코어마다 처리할 연산이 적절하게 분배되지 못한다면, 코어 숫자에 비해서 연산이 기대치만큼 빠르지 못할 수도 있다
따라서 멀티 코어는 얼마나 연산량을 각 코어에 적절하게 분배해주냐가 중요하다고 할 수 있다


## 스레드

### 스레드란

스레드란, 정말 간단하게 실행 흐름의 단위, 라고 할 수 있다.
하지만 이렇게만 써 놓는다면 구체적으로 어떤 것인지 잘 모르겠다.

스레드에는
1. 하드웨어적 스레드
2. 소프트웨어적 스레드

가 존재한다


#### 하드웨어적 스레드

하드웨어 스레드 : 하나의 코어가 동시에 처리하는 명령어 단위, 논리 프로세서 라고도 한다
하나의 코어가, 한번에 하나의 명령어를 처리 할 수 있다면 1코어 1스레드라고 한다

하드웨어 스레드를 여러 개 가지고 있는 멀티스레드 프로세서가 있다면
가장 큰 핵심은 레지스터다

하나의 명령어를 실행하기 위해 꼭 필요한 레지스터들을 편의상 '레지스터 세트' 라고 해 보자.
이 '레지스터 세트' 가 하나의 코어 안에 여러 개 있으면, 하나의 코어가 여러 명령어를 동시에 처리 할 수 있다.

예를 들어 하나의 코어 안에 '프로그램 카운터' 가 2개 있다고 한다면, 다음에 실행할 주소를 한 번에 2개씩 지정 할 수 있는 것이다


#### 소프트웨어적 스레드

소프트웨어적 스레드 : 하나의 프로그램에서 독립적으로 실행되는 단위
싱글 스레드 ( 스레드가 1개 ) 라면 프로그램에서 하나의 흐름으로 프로그램이 실행되고
멀티 스레드라면 ( n개의 스레드 ) 프로그램에서 n개의 흐름을 사용할 수 있다는 것이다

하나의 프로그램이 있다고 해 보자
1. 사용자로부터 입력받은 내용을 화면에 보여 주는 기능
2. 사용자가 입력한 내용이 맞춤법에 맞는지 검사하는 기능
3. 사용자가 입력한 내용을 수시로 저장하는 기능

이 세 기능이 동시에 동작해야 한다고 할 때, 소프트웨어 스레드를 3개 만들어서 각각이 실행되도록 하는 식으로 하면, 동시에 실행되게 할 수 있다

멀티 프로세스와 멀티 스레드에 대해서는 나중에 더 자세히 찾아보도록 하겠다


#### 하드웨어와 소프트웨어 스레드
 
※ 1코어 1스레드 CPU도 여러 소프트웨어적 스레드를 만들 수 있다

CPU는 내부적으로 여러 개의 프로그램이나 스레드를 실행 할 때, 엄청 빠르게 번갈아가면서 실행하기 때문에, 사용자에게 동시에 실행되는 것처럼 보이게 된다.

그렇기 때문에 하드웨어적 스레드가 하나더라도, 소프트웨어적 스레드는 여러 개 만들 수가 있다.
